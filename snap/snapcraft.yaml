name: bitcoin-rs
summary: Bitcoin client
description: |
  Bitcoin client written in Rust.

grade: stable # must be 'stable' to release into candidate/stable channels
confinement: strict

apps:
  bitcoin-rs:
    command: bitcoin-rs
    plugs: [home, network, network-bind, removable-media]

parts:
  bitcoin-rs:
    source: https://github.com/publicmoney/bitcoin-rs.git
    source-tag: master
    plugin: rust
    build-packages:
      - g++
    override-pull: |
       snapcraftctl pull
       version="$(git describe --dirty --always)"
       snapcraftctl set-version $version
    override-build: |
       $HOME/.cargo/bin/cargo build -p bitcoin-rs --release
       mkdir $SNAPCRAFT_PART_INSTALL/bin
       mv target/release/bitcoin-rs $SNAPCRAFT_PART_INSTALL/bin/
